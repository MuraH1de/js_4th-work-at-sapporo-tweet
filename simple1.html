<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>Twitterへの自動投稿！</title>
</head>
<body>
<!-- コンテンツ表示画面 -->

<div>
    <div> URL：<input type="text" id="access"> </div>
    <div> タイトル：<input type="text" id="title"> </div>
    <div>
        <textarea id="comm" cols="30" rows="10"></textarea>
        <button id="send">送信</button>
    </div>
    <div id="output"></div>
</div>
<!--/ コンテンツ表示画面 -->



<!-- JQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<!-- JQuery -->
<!-- <script src="./js/generate_hatena.js"></script> -->


<!--** 以下Twitterの設定 **-->
<script>
// 1:API key   qjMyitsVdCUysPiN1c7awPyiF
// 2:API secret key    Yy3dn9qMtcgplrp76T3pUFqRmvLRfQohCC9XQBsYXVtVQi86XP
// 3:Access token      110156748-4DuIdgxW9dtvr2qTQrqQ10H9uAiJParE2fXEZbrk
// 4:Access token secret    7x1LP24C4xq5bajuB3rTGyikfME8HEOmr6qMGaHs154aL
$("#send").on("click", function() {
    //$("#loading").show(); //Loading表示


    // みなさんのtoken
    let token = "de5bc52ea923ff4e60a4b9f72c4a8db436529eea"
    // searchTextに入ってきた文字列を使ってaxiosのURLを組み立てる
    // その上で、axios.getを使ってAPIにアクセスする
    axios.get(`https://qiita.com/api/v2/items?page=1&per_page=20&query=${searchText}`, {
      headers: {
        Authorization: `Bearer ${token}`,
      }
    })


    .then(function(response) {
      // response.dataでいい感じにサマリにしてくれた配列を返してもらえるようになる
      
      console.log(response.data);
      let data = response.data;
      let str = "";

      if(data.length == 0){
        str += "結果がないよ";
      }


      for(let i=0; i<data.length; i++){
        str += `<a href="${data[i].url}">${data[i].title}</a><br>`
      }
      $("#result").html(str);
    })
  });



</script>









</body>
</html>
































